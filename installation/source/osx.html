<!DOCTYPE html><html><head><meta charSet="utf-8"/><script>!function(){try {var d=document.documentElement.classList;d.remove('light','dark');var e=localStorage.getItem('theme');if(!e)return localStorage.setItem('theme','light'),d.add('light');if("system"===e){var t="(prefers-color-scheme: dark)",m=window.matchMedia(t);m.media!==t||m.matches?d.add('dark'):d.add('light')}else d.add(e)}catch(e){}}()</script><link rel="stylesheet" href="https://rsms.me/inter/inter.css"/><title>macOS Build Instructions and Notes â€“ Wiocoin</title><style>html{font-family:Inter,sans-serif}@supports(font-variation-settings:normal){html{font-family:'Inter var',sans-serif}}</style><meta name="msapplication-TileColor" content="#ffffff"/><meta name="theme-color" content="#ffffff"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta http-equiv="Content-Language" content="en"/><meta name="description" content="Wiocoin: the Next.js site builder"/><meta name="og:description" content="Wiocoin: the Next.js site builder"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:image" content="https://wiocoin.vercel.app/og.png"/><meta name="twitter:site:domain" content="wiocoin.vercel.app"/><meta name="twitter:url" content="https://wiocoin.vercel.app"/><meta name="og:title" content="Wiocoin: Next.js static site generator"/><meta name="og:image" content="https://wiocoin.vercel.app/og.png"/><meta name="apple-mobile-web-app-title" content="Wiocoin"/><link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png"/><link rel="icon" type="image/png" sizes="192x192" href="/android-icon-192x192.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="96x96" href="/favicon-96x96.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"/><meta name="msapplication-TileImage" content="/ms-icon-144x144.png"/><link rel="icon" href="data:image/svg+xml;utf8,&lt;svg xmlns=&#x27;http://www.w3.org/2000/svg&#x27; viewBox=&#x27;0 0 100 100&#x27;&gt;&lt;text x=&#x27;50&#x27; y=&#x27;.9em&#x27; font-size=&#x27;90&#x27; text-anchor=&#x27;middle&#x27;&gt;ðŸ‘‹&lt;/text&gt;&lt;style&gt;text{font-family:system-ui,-apple-system,BlinkMacSystemFont,&quot;Segoe UI&quot;,Roboto,&quot;Helvetica Neue&quot;,Arial,&quot;Noto Sans&quot;,sans-serif,&quot;Apple Color Emoji&quot;,&quot;Segoe UI Emoji&quot;,&quot;Segoe UI Symbol&quot;,&quot;Noto Color Emoji&quot;;fill:black}@media(prefers-color-scheme:dark){text{fill:white}}&lt;/style&gt;&lt;/svg&gt;"/><meta name="next-head-count" content="25"/><link rel="preload" href="/_next/static/css/b2cc816d3551ec97.css" as="style"/><link rel="stylesheet" href="/_next/static/css/b2cc816d3551ec97.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-d7b038a63b619762.js" defer=""></script><script src="/_next/static/chunks/framework-ff100329a956f214.js" defer=""></script><script src="/_next/static/chunks/main-01df828e572375b9.js" defer=""></script><script src="/_next/static/chunks/pages/_app-c9482e1feb19cf8c.js" defer=""></script><script src="/_next/static/chunks/511-47aafb0e887a3c75.js" defer=""></script><script src="/_next/static/chunks/pages/installation/source/osx-93582bf3d56f2537.js" defer=""></script><script src="/_next/static/c8C6UClgyvQiV2hMAXEGv/_buildManifest.js" defer=""></script><script src="/_next/static/c8C6UClgyvQiV2hMAXEGv/_ssgManifest.js" defer=""></script><script src="/_next/static/c8C6UClgyvQiV2hMAXEGv/_middlewareManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><div class="nextra-container main-container flex flex-col"><nav class="flex items-center bg-white z-20 fixed top-0 left-0 right-0 h-16 border-b border-gray-200 px-6 dark:bg-dark dark:border-gray-900 bg-opacity-[.97] dark:bg-opacity-100"><div class="w-full flex items-center mr-2"><a class="no-underline text-current inline-flex items-center hover:opacity-75" href="/"><span class="mr-2 font-extrabold hidden md:inline">Wiocoin (WIO)</span><span class="text-gray-600 font-normal hidden md:inline">World is One Coin</span></a></div><div class="flex-1"><div class="hidden md:inline-block mr-2"><div class="nextra-search relative w-full md:w-64"><input type="search" class="appearance-none border rounded py-2 px-3 leading-tight focus:outline-none focus:ring w-full" placeholder="Search (&quot;/&quot; to focus)"/></div></div></div><a class="text-current p-2 cursor-pointer" tabindex="0"><svg viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" fill="none" shape-rendering="geometricPrecision"></svg></a><a class="text-current p-2" href="https://github.com/wiocoin/website" target="_blank"><svg height="24" viewBox="2 2 20 20" fill="none"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 3C7.0275 3 3 7.12937 3 12.2276C3 16.3109 5.57625 19.7597 9.15374 20.9824C9.60374 21.0631 9.77249 20.7863 9.77249 20.5441C9.77249 20.3249 9.76125 19.5982 9.76125 18.8254C7.5 19.2522 6.915 18.2602 6.735 17.7412C6.63375 17.4759 6.19499 16.6569 5.8125 16.4378C5.4975 16.2647 5.0475 15.838 5.80124 15.8264C6.51 15.8149 7.01625 16.4954 7.18499 16.7723C7.99499 18.1679 9.28875 17.7758 9.80625 17.5335C9.885 16.9337 10.1212 16.53 10.38 16.2993C8.3775 16.0687 6.285 15.2728 6.285 11.7432C6.285 10.7397 6.63375 9.9092 7.20749 9.26326C7.1175 9.03257 6.8025 8.08674 7.2975 6.81794C7.2975 6.81794 8.05125 6.57571 9.77249 7.76377C10.4925 7.55615 11.2575 7.45234 12.0225 7.45234C12.7875 7.45234 13.5525 7.55615 14.2725 7.76377C15.9937 6.56418 16.7475 6.81794 16.7475 6.81794C17.2424 8.08674 16.9275 9.03257 16.8375 9.26326C17.4113 9.9092 17.76 10.7281 17.76 11.7432C17.76 15.2843 15.6563 16.0687 13.6537 16.2993C13.98 16.5877 14.2613 17.1414 14.2613 18.0065C14.2613 19.2407 14.25 20.2326 14.25 20.5441C14.25 20.7863 14.4188 21.0746 14.8688 20.9824C16.6554 20.364 18.2079 19.1866 19.3078 17.6162C20.4077 16.0457 20.9995 14.1611 21 12.2276C21 7.12937 16.9725 3 12 3Z" fill="currentColor"></path></svg></a><button class="block md:hidden p-2"><svg fill="none" width="24" height="24" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg></button><div class="-mr-2"></div></nav><div class="flex flex-1 h-full"><aside class="fixed h-screen bg-white dark:bg-dark flex-shrink-0 w-full md:w-64 md:sticky z-10 hidden md:block" style="top:4rem;height:calc(100vh - 4rem)"><div class="sidebar border-gray-200 dark:border-gray-900 w-full p-4 pb-40 md:pb-16 h-full overflow-y-auto"><div class="mb-4 block md:hidden"><div class="nextra-search relative w-full md:w-64"><input type="search" class="appearance-none border rounded py-2 px-3 leading-tight focus:outline-none focus:ring w-full" placeholder="Search (&quot;/&quot; to focus)"/></div></div><div class="hidden md:block"><ul><li class=""><a href="/">Introduction</a></li><li class=""><a href="/get-started">Development Process</a></li><li class=""><a href="/testing">Testing</a></li><li class="active"><button>Installation</button><div style="display:initial"><ul><li class="active"><button>From Source</button><div style="display:initial"><ul><li class=""><a href="/installation/source">Windows Build</a></li><li class=""><a href="/installation/source/linux">Unix Build</a></li><li class=""><a href="/installation/source/osx">Mac OS Build</a></li><li class=""><a href="/installation/source/bsd">Build on OpenBSD</a></li></ul></div></li><li class="active"><button>Downloads</button><div style="display:initial"><ul><li class=""><a href="/installation/download">Windows 10/8/7</a></li><li class=""><a href="/installation/download/macosx">MacOS</a></li><li class=""><a href="/installation/download/unix">Linux/Unix X86/64</a></li></ul></div></li></ul></div></li><li class="active"><button>Running</button><div style="display:initial"><ul><li class=""><a href="/running/running">Using Wiocoind and Wiocoin-cli</a></li></ul></div></li></ul></div><div class="md:hidden"><ul><li class=""><a href="/">Introduction</a></li><li class=""><a href="/get-started">Development Process</a></li><li class=""><a href="/testing">Testing</a></li><li class="active"><button>Installation</button><div style="display:initial"><ul><li class="active"><button>From Source</button><div style="display:initial"><ul><li class=""><a href="/installation/source">Windows Build</a></li><li class=""><a href="/installation/source/linux">Unix Build</a></li><li class=""><a href="/installation/source/osx">Mac OS Build</a></li><li class=""><a href="/installation/source/bsd">Build on OpenBSD</a></li></ul></div></li><li class="active"><button>Downloads</button><div style="display:initial"><ul><li class=""><a href="/installation/download">Windows 10/8/7</a></li><li class=""><a href="/installation/download/macosx">MacOS</a></li><li class=""><a href="/installation/download/unix">Linux/Unix X86/64</a></li></ul></div></li></ul></div></li><li class="active"><button>Running</button><div style="display:initial"><ul><li class=""><a href="/running/running">Using Wiocoind and Wiocoin-cli</a></li></ul></div></li></ul></div></div></aside><div id="reach-skip-nav" data-reach-skip-nav-content=""></div><article class="docs-container relative pt-20 pb-16 px-6 md:px-8 w-full max-w-full overflow-x-hidden"><main class="max-w-screen-md mx-auto"><h1>macOS Build Instructions and Notes</h1><p>====================================
The commands in this guide should be executed in a Terminal application.
The built-in one is located in <code>/Applications/Utilities/Terminal.app</code>.</p><h2><span class="subheading-anchor" id="preparation"></span><a href="#preparation" class="text-current no-underline no-outline">Preparation<span class="anchor-icon" aria-hidden="true">#</span></a></h2><p>Install the macOS command line tools:</p><p><code>xcode-select --install</code></p><p>When the popup appears, click <code>Install</code>.</p><p>Then install <a target="_blank" href="https://brew.sh">Homebrew</a>.</p><h2><span class="subheading-anchor" id="dependencies"></span><a href="#dependencies" class="text-current no-underline no-outline">Dependencies<span class="anchor-icon" aria-hidden="true">#</span></a></h2><p>brew install automake berkeley-db4 libtool boost miniupnpc openssl pkg-config protobuf python qt libevent qrencode</p><p>See <a href="dependencies.md">dependencies.md</a> for a complete overview.</p><p>If you want to build the disk image with <code>make deploy</code> (.dmg / optional), you need RSVG:</p><p>brew install librsvg</p><h2><span class="subheading-anchor" id="berkeley-db"></span><a href="#berkeley-db" class="text-current no-underline no-outline">Berkeley DB<span class="anchor-icon" aria-hidden="true">#</span></a></h2><p>It is recommended to use Berkeley DB 4.8. If you have to build it yourself,
you can use <a href="/contrib/install_db4.sh">the installation script included in contrib/</a>
like so:</p><pre><code class="prism-code language-shell" style="background-color:transparent"><div class="token-line"><span class="token plain">./contrib/install_db4.sh </span><span class="token builtin class-name" style="color:#ff0078;font-weight:bold">.</span></div></code></pre><p>from the root of the repository.</p><p><strong>Note</strong>: You only need Berkeley DB if the wallet is enabled (see <a href="/doc/build-osx.md#disable-wallet-mode"><em>Disable-wallet mode</em></a>).</p><h2><span class="subheading-anchor" id="build-wiocoin-core"></span><a href="#build-wiocoin-core" class="text-current no-underline no-outline">Build Wiocoin Core<span class="anchor-icon" aria-hidden="true">#</span></a></h2><ol><li><p>Clone the Wiocoin Core source code:</p><p>git clone <a target="_blank" href="https://github.com/wiocoin-project/wiocoin">https://github.com/wiocoin-project/wiocoin</a>
cd wiocoin</p></li><li><p>Build Wiocoin Core:</p><p>Configure and build the headless Wiocoin Core binaries as well as the GUI (if Qt is found).</p><p>You can disable the GUI build by passing <code>--without-gui</code> to configure.</p><p>./autogen.sh
./configure
make</p></li><li><p>It is recommended to build and run the unit tests:</p><p>make check</p></li><li><p>You can also create a .dmg that contains the .app bundle (optional):</p><p>make deploy</p></li><li><p>Installation into user directories (optional):</p><p>make install</p><p>or</p><p>cd ~/wiocoin/src
cp wiocoind /usr/local/bin/
cp wiocoin-cli /usr/local/bin/</p></li></ol><h2><span class="subheading-anchor" id="disable-wallet-mode"></span><a href="#disable-wallet-mode" class="text-current no-underline no-outline">Disable-wallet mode<span class="anchor-icon" aria-hidden="true">#</span></a></h2><p>When the intention is to run only a P2P node without a wallet, Wiocoin Core may be compiled in
disable-wallet mode with:</p><p>./configure --disable-wallet</p><p>In this case there is no dependency on Berkeley DB 4.8.</p><p>Mining is also possible in disable-wallet mode using the <code>getblocktemplate</code> RPC call.</p><h2><span class="subheading-anchor" id="running"></span><a href="#running" class="text-current no-underline no-outline">Running<span class="anchor-icon" aria-hidden="true">#</span></a></h2><p>Wiocoin Core is now available at <code>./src/wiocoind</code></p><p>Before running, you may create an empty configuration file:</p><p>mkdir -p &quot;/Users/$USER/Library/Application Support/Wiocoin&quot;
touch &quot;/Users/$USER/Library/Application Support/Wiocoin/wiocoin.conf&quot;
chmod 600 &quot;/Users/$USER/Library/Application Support/Wiocoin/wiocoin.conf&quot;</p><p>The first time you run wiocoind, it will start downloading the blockchain. This process could take many hours, or even days on slower than average systems.</p><p>You can monitor the download process by looking at the debug.log file:</p><p>tail -f $HOME/Library/Application\ Support/Wiocoin/debug.log</p><h2><span class="subheading-anchor" id="other-commands"></span><a href="#other-commands" class="text-current no-underline no-outline">Other commands:<span class="anchor-icon" aria-hidden="true">#</span></a></h2><p>./src/wiocoind -daemon # Starts the wiocoin daemon.
./src/wiocoin-cli --help # Outputs a list of command-line options.
./src/wiocoin-cli help # Outputs a list of RPC commands when the daemon is running.</p><h2><span class="subheading-anchor" id="notes"></span><a href="#notes" class="text-current no-underline no-outline">Notes<span class="anchor-icon" aria-hidden="true">#</span></a></h2><ul><li><p>Tested on OS X 10.10 Yosemite through macOS 10.13 High Sierra on 64-bit Intel processors only.</p></li><li><p>Building with downloaded Qt binaries is not officially supported. See the notes in <a target="_blank" href="https://github.com/bitcoin/bitcoin/issues/7714">#7714</a></p></li></ul><h2><span class="subheading-anchor" id="deterministic-macos-dmg-notes"></span><a href="#deterministic-macos-dmg-notes" class="text-current no-underline no-outline">Deterministic macOS DMG Notes<span class="anchor-icon" aria-hidden="true">#</span></a></h2><p>Working macOS DMGs are created in Linux by combining a recent clang,
the Apple binutils (ld, ar, etc) and DMG authoring tools.</p><p>Apple uses clang extensively for development and has upstreamed the necessary
functionality so that a vanilla clang can take advantage. It supports the use
of -F, -target, -mmacosx-version-min, and --sysroot, which are all necessary
when building for macOS.</p><p>Apple&#x27;s version of binutils (called cctools) contains lots of functionality
missing in the FSF&#x27;s binutils. In addition to extra linker options for
frameworks and sysroots, several other tools are needed as well such as
install_name_tool, lipo, and nmedit. These do not build under linux, so they
have been patched to do so. The work here was used as a starting point:
<a target="_blank" href="https://github.com/mingwandroid/toolchain4">mingwandroid / toolchain4</a>.</p><p>In order to build a working toolchain, the following source packages are needed
from Apple: cctools, dyld, and ld64.</p><p>These tools inject timestamps by default, which produce non-deterministic
binaries. The ZERO_AR_DATE environment variable is used to disable that.</p><p>This version of cctools has been patched to use the current version of clang&#x27;s
headers and its libLTO.so rather than those from llvmgcc, as it was
originally done in toolchain4.</p><p>To complicate things further, all builds must target an Apple SDK. These SDKs
are free to download, but not redistributable.
To obtain it, register for a developer account, then download the <a target="_blank" href="https://developer.apple.com/devcenter/download.action?path=/Developer_Tools/Xcode_7.3.1/Xcode_7.3.1.dmg">Xcode 7.3.1 dmg</a>.</p><p>This file is several gigabytes in size, but only a single directory inside is
needed:</p><pre><code>Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk
</code></pre><p>Unfortunately, the usual linux tools (7zip, hpmount, loopback mount) are incapable of opening this file.
To create a tarball suitable for Gitian input, there are two options:</p><p>Using macOS, you can mount the dmg, and then create it with:</p><pre><code>  $ hdiutil attach Xcode_7.3.1.dmg
  $ tar -C /Volumes/Xcode/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/ -czf MacOSX10.11.sdk.tar.gz MacOSX10.11.sdk
</code></pre><p>Alternatively, you can use 7zip and SleuthKit to extract the files one by one.
The script contrib/macdeploy/extract-osx-sdk.sh automates this. First ensure
the dmg file is in the current directory, and then run the script. You may wish
to delete the intermediate 5.hfs file and MacOSX10.11.sdk (the directory) when
you&#x27;ve confirmed the extraction succeeded.</p><pre><code class="prism-code language-bash" style="background-color:transparent"><div class="token-line"><span class="token function">apt-get</span><span class="token plain"> </span><span class="token function">install</span><span class="token plain"> p7zip-full sleuthkit</span></div><div class="token-line"><span class="token plain">contrib/macdeploy/extract-osx-sdk.sh</span></div><div class="token-line"><span class="token plain"></span><span class="token function">rm</span><span class="token plain"> -rf </span><span class="token number">5</span><span class="token plain">.hfs MacOSX10.11.sdk</span></div></code></pre><p>The Gitian descriptors build 2 sets of files: Linux tools, then Apple binaries
which are created using these tools. The build process has been designed to
avoid including the SDK&#x27;s files in Gitian&#x27;s outputs. All interim tarballs are
fully deterministic and may be freely redistributed.</p><p>genisoimage is used to create the initial DMG. It is not deterministic as-is,
so it has been patched. A system genisoimage will work fine, but it will not
be deterministic because the file-order will change between invocations.
The patch can be seen here: <a target="_blank" href="https://raw.githubusercontent.com/theuni/osx-cross-depends/master/patches/cdrtools/genisoimage.diff">theuni / osx-cross-depends</a>.
No effort was made to fix this cleanly, so it likely leaks memory badly. But
it&#x27;s only used for a single invocation, so that&#x27;s no real concern.</p><p>genisoimage cannot compress DMGs, so afterwards, the &#x27;dmg&#x27; tool from the
libdmg-hfsplus project is used to compress it. There are several bugs in this
tool and its maintainer has seemingly abandoned the project. It has been forked
and is available (with fixes) here: <a target="_blank" href="https://github.com/theuni/libdmg-hfsplus">theuni / libdmg-hfsplus</a>.</p><p>The &#x27;dmg&#x27; tool has the ability to create DMGs from scratch as well, but this
functionality is broken. Only the compression feature is currently used.
Ideally, the creation could be fixed and genisoimage would no longer be necessary.</p><p>Background images and other features can be added to DMG files by inserting a
.DS_Store before creation. This is generated by the script
contrib/macdeploy/custom_dsstore.py.</p><p>As of OS X 10.9 Mavericks, using an Apple-blessed key to sign binaries is a
requirement in order to satisfy the new Gatekeeper requirements. Because this
private key cannot be shared, we&#x27;ll have to be a bit creative in order for the
build process to remain somewhat deterministic. Here&#x27;s how it works:</p><ul><li>Builders use Gitian to create an unsigned release. This outputs an unsigned
dmg which users may choose to bless and run. It also outputs an unsigned app
structure in the form of a tarball, which also contains all of the tools
that have been previously (deterministically) built in order to create a
final dmg.</li><li>The Apple keyholder uses this unsigned app to create a detached signature,
using the script that is also included there. Detached signatures are available from this <a target="_blank" href="https://github.com/bitcoin-core/bitcoin-detached-sigs">repository</a>.</li><li>Builders feed the unsigned app + detached signature back into Gitian. It
uses the pre-built tools to recombine the pieces into a deterministic dmg.</li></ul><footer class="mt-24"><div class="flex flex-row items-center justify-between"><div></div><div></div></div><hr/><div class="mt-24 flex justify-between flex-col-reverse md:flex-row items-center md:items-end"><span class="text-gray-600">MIT <!-- -->2022<!-- --> Â© Wiocoin.</span><div class="mt-6"></div><a class="text-sm" href="https://github.com/wiocoin/website/blob/master/pages/installation/source/C:/Users/lenovo/Documents/GitHub/website/pages/installation/source/osx.mdx" target="_blank">Edit this page on GitHub</a></div></footer></main></article></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{}},"page":"/installation/source/osx","query":{},"buildId":"c8C6UClgyvQiV2hMAXEGv","nextExport":true,"autoExport":true,"isFallback":false,"scriptLoader":[]}</script></body></html>